
@model HeartDiseasePrediction.ViewModel.DoctorVM

@{
    ViewData["Title"] = "Doctor Details";
}
<style type="text/css">
    /* body {
            color: #000;
            overflow-x: hidden;
            height: 100%;
            background-color: #C5CAE9 !important;
            background-repeat: no-repeat;
            padding: 0px !important;
        }*/

    /*.container-fluid {
            padding-top: 120px !important;
            padding-bottom: 120px !important;
        }*/

    .card {
        box-shadow: 0px 4px 8px 0px #7986CB;
    }

    input {
        padding: 10px 20px !important;
        border: 1px solid #060 !important;
        border-radius: 10px;
        box-sizing: border-box;
        /* background-color: white !important;
            color: #fff !important;*/
        font-size: 16px;
        letter-spacing: 1px;
        width: 180px;
    }

        input:focus {
            -moz-box-shadow: none !important;
            -webkit-box-shadow: none !important;
            box-shadow: none !important;
            border: 1px solid #512DA8;
            outline-width: 0;
        }

    ::placeholder {
        color: #000;
        opacity: 1;
    }

    :-ms-input-placeholder {
        color: #000;
    }

    ::-ms-input-placeholder {
        color: #000;
    }

    button:focus {
        -moz-box-shadow: none !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        outline-width: 0;
    }

    .datepicker {
        background-color: white !important;
        color: #000 !important;
        border: none;
        padding: 5px !important;
    }

    .datepicker-dropdown:after {
        border-bottom: 6px solid #000;
    }

    thead tr:nth-child(3) th {
        color: #fff !important;
        font-weight: bold;
        padding-top: 20px;
        padding-bottom: 10px;
    }

    .dow, .old-day, .day, .new-day {
        width: 40px !important;
        height: 40px !important;
        border-radius: 0px !important;
    }

        .old-day:hover, .day:hover, .new-day:hover, .month:hover, .year:hover, .decade:hover, .century:hover {
            border-radius: 6px !important;
            background-color: #eee;
            color: #000;
        }

    /*.active {
            border-radius: 6px !important;
            background-image: linear-gradient(#90CAF9, #64B5F6) !important;
            color: #000 !important;
        }*/

    .disabled {
        color: white !important;
        background-color: red;
        pointer-events: none;
    }

    .prev, .next, .datepicker-switch {
        border-radius: 0 !important;
        padding: 20px 10px !important;
        text-transform: uppercase;
        font-size: 20px;
        color: #000 !important;
        opacity: 0.8;
    }

        .prev:hover, .next:hover, .datepicker-switch:hover {
            background-color: inherit !important;
            opacity: 1;
        }

    .cell {
        border: 1px solid #BDBDBD;
        margin: 2px;
        cursor: pointer;
    }

        .cell:hover {
            border: 1px solid #3D5AFE;
        }

        .cell.select {
           /* background-color: #3D5AFE;*/
            color: #fff;
            background-color: limegreen;
            cursor: not-allowed;
        }

    .fa-calendar {
        color: #fff;
        font-size: 20px;
        padding-top: 8px;
        padding-left: 5px;
        cursor: pointer;
    }

    .fa-envelope-o {
        padding-top: 10px;
        padding-left: 5px;
    }

    /*.time-slot {
        display: inline-block;
        margin: 5px;
        padding: 5px 20px;
        background-color: lightgray;
        border: 1px solid #BDBDBD;
        cursor: pointer;
    }

        .time-slot:hover{
            border: 1px solid #3D5AFE;
        }

        .time-slot.disabled {
            background-color: red;
            cursor: not-allowed;
        }*/

</style>

<div class="card card-body" style="margin:20px 100px 0px 100px">
    <div class="main-body">
        <nav aria-label="breadcrumb" class="main-breadcrumb ">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">Doctor</li>
                <li class="breadcrumb-item">Details</li>
                <li class="breadcrumb-item active" aria-current="page">Doctor Details</li>
            </ol>
        </nav>
    </div>
    <div class="container">
        <div class="row align-items-center position-relative">
            <div class="col-xl-3 col-lg-4">
                <img src="~/images/doctor.png" width="100px" class="rounded-circle" alt="@Model.Name">
            </div>
            <div class="col-xl-6 col-lg-8">
                <h2 style="color:royalblue"><strong>Doctor Details</strong></h2>
                <h2>
                    @Model.FirstName @Model.LastName
                </h2>
                <div class="d-flex flex-row align-items-center mb-3">
                    <div style="padding-right:10px">
                        @*<span class="badge bg-success text-white">AVAILABLE</span>*@
                        @if (Model.IsAvailable != true)
                        {
                            <span class="badge bg-success text-white">AVAILABLE</span>
                        }
                        else
                        {
                            <span class="badge bg-danger text-white">Pending</span>
                        }
                    </div>
                    <div style="padding-right:10px;">
                        <i class="fa fa-user-md"></i>
                        <span>@Model.Name</span>
                    </div>
                    <div style="padding-right:10px">
                        @* <i class="fa fa-usd" aria-hidden="true"></i>*@
                        <span style="text-decoration:none;">
                            @Model.Gender
                        </span>
                    </div>
                </div>
                <div class="align-items-center mb-6">
                    <div style="padding-right:15px">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>
                        <span style="text-decoration:none; color:royalblue">
                            @Model.Location
                        </span>
                    </div>
                    <div style="padding-right:15px">
                        <i class="fa fa-usd" aria-hidden="true"></i> Fee:
                        <span style="text-decoration:none; color:royalblue">
                            @Model.Price EGP
                        </span>
                    </div>
                    <div style="padding-right:10px">
                        <i class="fa fa-calendar" aria-hidden="true" style="color:limegreen"></i>
                        @Model.BirthDate.ToString("dd MMM yyyy")
                    </div>
                    <div>
                        <i class="fa fa-envelope-o" aria-hidden="true"></i>
                        <span>@Model.Email</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card card-body" style="margin:20px 100px 10px 100px">
    <div class="main-body">
        <div aria-label="breadcrumb" class="main-breadcrumb ">
            <div class="breadcrumb" style="background-color:#00c6a9">
                <div class="justify-content-center text-white" aria-current="page"><h4>Book Appointment</h4></div>
            </div>
        </div>
    </div>
    <div>
        <div class="container-fluid px-0 px-sm-4 mx-auto">
            <div class="row justify-content-center mx-0">
                <div class="col-lg-10">
                    <form method="post">
                        <div class="card border-0">
                            <div autocomplete="off">
                                <div class="card-header bg-secondary">
                                    <div class="mx-0 mb-0 row justify-content-sm-center justify-content-start px-1">
                                        <input type="text" id="date" class="datepicker" placeholder="Select Date" name="date" readonly><span class="fa fa-calendar"></span>
                                    </div>
                                </div>
                                <div class="card-body p-3 p-sm-5">
                                    <div class="row text-center mx-0">
                                        <div class="col-md-2 col-4 my-1 px-2 "><div class="cell py-1" onclick="selectTimeSlot(this)">9:00AM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">9:30AM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">10:00AM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">10:30AM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">11:00AM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">11:30AM</div></div>
                                    </div>
                                    <div class="row text-center mx-0">
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">12:00PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">12:30PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">1:00PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">1:30PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">2:00PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">2:30PM</div></div>
                                    </div>
                                    <div class="row text-center mx-0">
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">3:00PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">3:30PM</div></div>
                                        <div class="col-md-2 col-4 my-1 px-2"><div class="cell py-1" onclick="selectTimeSlot(this)">4:00PM</div></div>
                                    </div>
                                </div>
                            </div>
                            @*<label for="date">Select Date:</label>
                            <input type="date" id="date" onchange="updateTimeSlots()">
                            <br>*@

                            <!-- Time Slots -->
                            <div id="time-slots-container">
                                <!-- Timeslots will be dynamically added here -->
                            </div>
                        </div>
                        <div class="form-row" style="margin:20px 0px">
                            <div class="form-group col-lg-4">
                                <label>Patient Name</label>
                                <input type="text" class="form-control" id="Name" placeholder="Enter Your Name">
                                <span class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-4">
                                <label>Email</label>
                                <input type="text" class="form-control" id="Email" placeholder="Enter Your Email">
                                <span class="text-danger"></span>
                            </div>
                            <div class="form-group col-lg-4">
                                <label>National Id</label>
                                <input type="number" class="form-control" id="SSN" placeholder="Enter Your National ID">
                                <span class="text-danger"></span>
                            </div>
                        </div>
                        <div class="btn btn-success " style="margin:20px 230px 10px; padding:0px 50px">
                            <button type="submit" class="btn text-white"><strong>Book Appointment</strong></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('.datepicker').datepicker({
            format: 'dd-mm-yyyy',
            autoclose: true,
            startDate: '0d'
        });

        $('.cell').click(function () {
            $('.cell').removeClass('select');
            $(this).addClass('select');
        });
    });

    /*Define available time slots*/
    //const timeSlots = ['9:00AM', '9:30AM', '10:00AM', '10:30AM', '11:00AM', '11:30AM', '12:00PM',
    //    '12:30PM', '1:00PM', '1:30PM', '2:00PM', '2:30PM', '3:00PM'];

    /* Function to generate time slots based on selected date*/
    //function generateTimeSlots(date) {
    //    const timeSlotsContainer = document.getElementsByClassName('.cell');
    //    timeSlotsContainer.innerHTML = '';  /*Clear previous slots*/

    //    const selectedDate = new Date(date);
    //    const today = new Date();

    //    /*Disable past dates*/
    //    if (selectedDate < today) {
    //        alert("Please select a future date.");
    //        return;
    //    }

    //    cell.forEach(slot => {
    //        const timeSlotElement = document.createElement('div');
    //        timeSlotElement.classList.add('time-slot');
    //        timeSlotElement.textContent = slot;
    //        timeSlotElement.onclick = function () {
    //            if (!timeSlotElement.classList.contains('disabled')) {
    //                timeSlotElement.classList.add('disabled');
    //            } else {
    //                timeSlotElement.classList.remove('disabled');
    //            }
    //        };
    //        timeSlotsContainer.appendChild(timeSlotElement);
    //    });
    //}

   /* Function to update time slots when date changes*/
    //function updateTimeSlots() {
    //    const selectedDate = documentgetElementsByClassName('datepicker').value;
    //    generateTimeSlots(selectedDate);
    //}

    /*Initial generation of time slots*/
    //updateTimeSlots();


    let selectedTimeSlots = {};

    // Function to handle the selection of a time slot
    function selectTimeSlot(element) {
        const date = document.getElementById('date').value;
        const timeSlot = element.textContent;

        // Check if the time slot is already selected for the chosen date
        if (!selectedTimeSlots[date]) {
            selectedTimeSlots[date] = [];
        }
        if (selectedTimeSlots[date].includes(timeSlot)) {
            // If already selected, deselect it
            selectedTimeSlots[date] = selectedTimeSlots[date].filter(slot => slot !== timeSlot);
            element.classList.remove('disabled');
        } else {
            // If not selected, select it
            selectedTimeSlots[date].push(timeSlot);
            element.classList.add('disabled');
        }
    }

    // Function to handle date selection
    document.getElementById('date').addEventListener('change', function () {
        const date = this.value;

        // Check if time slots are selected for this date
        if (selectedTimeSlots[date]) {
            // Disable already selected time slots for this date
            const timeSlots = document.querySelectorAll('cell');
            timeSlots.forEach(slot => {
                if (selectedTimeSlots[date].includes(slot.textContent)) {
                    slot.classList.add('disabled');
                } else {
                    slot.classList.remove('disabled');
                }
            });
        }
    });

</script>